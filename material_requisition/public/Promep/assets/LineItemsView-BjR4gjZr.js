var v=(l,e,d)=>new Promise((m,o)=>{var r=c=>{try{x(d.next(c))}catch(b){o(b)}},_=c=>{try{x(d.throw(c))}catch(b){o(b)}},x=c=>c.done?m(c.value):Promise.resolve(c.value).then(r,_);x((d=d.apply(l,e)).next())});import{c as D,_ as I,e as a,f as t,t as i,i as f,r as h,h as p,l as y,w as g,v as P,F as w,j as S,m as k,p as q,n as C,g as M,o as n,q as F,s as L}from"./index-2cUDdOTE.js";import{S as O,C as T,X as R,E as V,A}from"./x-S9s7KQQn.js";/**
 * @license lucide-vue-next v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=D("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),E={name:"SelectivePOCreationModal",components:{X:R,ChevronDown:T,ShoppingCart:O,FileText:N},props:{selectedItems:{type:Array,required:!0}},emits:["close","created"],data(){return{isSubmitting:!1,showValidation:!1,suppliers:[],formData:{supplier:"",required_date:this.getDefaultRequiredDate(),strategy:"single",notes:""}}},computed:{today(){return new Date().toISOString().split("T")[0]},isFormValid(){return this.formData.supplier&&this.formData.required_date},uniqueRequests(){const l=new Set(this.selectedItems.map(e=>e.material_request));return Array.from(l)},groupedItems(){const l={};return this.selectedItems.forEach(e=>{l[e.material_request]||(l[e.material_request]={material_request:e.material_request,items:[]}),l[e.material_request].items.push(e)}),Object.values(l)}},mounted(){return v(this,null,function*(){yield this.loadSuppliers()})},methods:{getDefaultRequiredDate(){const l=new Date;return l.setDate(l.getDate()+14),l.toISOString().split("T")[0]},loadSuppliers(){return v(this,null,function*(){try{const l=yield fetch("/api/method/material_requisition.api.purchase_order.get_suppliers",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""}});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const e=yield l.json();if(e.exc)throw new Error(e.exc);this.suppliers=e.message||[]}catch(l){console.error("Failed to load suppliers:",l),this.suppliers=[]}})},getSupplierName(l){const e=this.suppliers.find(d=>d.name===l);return e?e.supplier_name:null},createPOs(){return v(this,null,function*(){if(!this.isFormValid){this.showValidation=!0;return}this.isSubmitting=!0;try{const l=yield fetch("/api/method/material_requisition.api.purchase_order.create_from_selected_items",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({selected_items:this.selectedItems.map(d=>({line_item_id:d.line_item_id,material_request:d.material_request,item_code:d.item_code,qty:d.pending_qty||d.qty,uom:d.uom})),supplier:this.formData.supplier,required_date:this.formData.required_date,strategy:this.formData.strategy,notes:this.formData.notes})});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const e=yield l.json();if(e.exc)throw new Error(e.exc);this.showSuccessMessage(e.message),this.$emit("created",e.message)}catch(l){console.error("Failed to create PO:",l),this.showErrorMessage(l.message)}finally{this.isSubmitting=!1}})},showSuccessMessage(l){const e=document.createElement("div");if(e.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Array.isArray(l)){const d=l.filter(m=>m.status==="success").length;e.textContent=`✅ ${d} Purchase Order(s) created successfully!`}else e.textContent=`✅ Purchase Order ${l.name||""} created successfully!`;document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},3e3)},showErrorMessage(l){const e=document.createElement("div");e.className="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",e.textContent=`❌ Error: ${l}`,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},5e3)}}},j={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},B={class:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},U={class:"flex items-center justify-between p-6 border-b"},H={class:"text-gray-600"},z={class:"p-6"},X={class:"mb-6"},J={class:"relative"},Q=["value"],Z={key:0,class:"text-red-500 text-sm mt-1"},G={class:"mb-6"},K=["min"],W={key:0,class:"text-red-500 text-sm mt-1"},Y={class:"mb-6"},$={class:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto"},ee={class:"space-y-3"},te={class:"font-medium text-gray-800 mb-2 flex items-center"},se={class:"ml-2 text-sm text-gray-500"},le={class:"space-y-2"},oe={class:"flex-1"},re={class:"font-medium text-gray-800"},ie={class:"text-sm text-gray-600"},ne={class:"text-right"},ae={class:"font-semibold text-gray-800"},de={class:"mb-6"},ue={class:"space-y-2"},ce={class:"flex items-center"},me={class:"flex items-center"},pe={class:"ml-2 text-sm text-gray-700"},ge={class:"mb-6"},he={class:"mb-6 bg-blue-50 rounded-lg p-4"},xe={class:"grid grid-cols-2 gap-4 text-sm"},be={class:"text-blue-700"},ye={class:"font-semibold"},fe={class:"text-blue-700"},_e={class:"font-semibold"},ve={class:"text-blue-700"},we={class:"font-semibold"},Se={class:"text-blue-700"},ke={class:"font-semibold"},Ce={class:"flex justify-end space-x-4"},qe=["disabled"],Ie={key:0},Pe={key:1},Me={key:3,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"};function Oe(l,e,d,m,o,r){const _=h("X"),x=h("ChevronDown"),c=h("FileText"),b=h("ShoppingCart");return n(),a("div",j,[t("div",B,[t("div",U,[t("div",null,[e[8]||(e[8]=t("h2",{class:"text-2xl font-bold text-gray-800"},"Create Purchase Order from Selected Items",-1)),t("p",H,i(d.selectedItems.length)+" items selected from "+i(r.uniqueRequests.length)+" material requests",1)]),t("button",{onClick:e[0]||(e[0]=s=>l.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition-colors"},[f(_,{class:"w-6 h-6"})])]),t("div",z,[t("div",X,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[y(" Supplier "),t("span",{class:"text-red-500"},"*")],-1)),t("div",J,[g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.formData.supplier=s),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",required:""},[e[9]||(e[9]=t("option",{value:""},"Select a supplier...",-1)),(n(!0),a(w,null,S(o.suppliers,s=>(n(),a("option",{key:s.name,value:s.name},i(s.supplier_name),9,Q))),128))],512),[[P,o.formData.supplier]]),f(x,{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none"})]),!o.formData.supplier&&o.showValidation?(n(),a("p",Z," Please select a supplier ")):p("",!0)]),t("div",G,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[y(" Required By "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.formData.required_date=s),type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:r.today,required:""},null,8,K),[[k,o.formData.required_date]]),!o.formData.required_date&&o.showValidation?(n(),a("p",W," Please select a required date ")):p("",!0)]),t("div",Y,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"Selected Items",-1)),t("div",$,[t("div",ee,[(n(!0),a(w,null,S(r.groupedItems,s=>(n(),a("div",{key:s.material_request,class:"border border-gray-200 rounded-lg p-3 bg-white"},[t("h4",te,[f(c,{class:"w-4 h-4 mr-2"}),y(" "+i(s.material_request)+" ",1),t("span",se,"("+i(s.items.length)+" items)",1)]),t("div",le,[(n(!0),a(w,null,S(s.items,u=>(n(),a("div",{key:u.line_item_id,class:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0"},[t("div",oe,[t("p",re,i(u.item_name),1),t("p",ie,i(u.item_code),1)]),t("div",ne,[t("p",ae,i(u.pending_qty||u.qty)+" "+i(u.uom),1),e[12]||(e[12]=t("p",{class:"text-xs text-gray-500"},"Pending qty",-1))])]))),128))])]))),128))])])]),t("div",de,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Purchase Order Strategy ",-1)),t("div",ue,[t("label",ce,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.formData.strategy=s),type:"radio",value:"single",class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[q,o.formData.strategy]]),e[14]||(e[14]=t("span",{class:"ml-2 text-sm text-gray-700"}," Create single PO with all items ",-1))]),t("label",me,[g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.formData.strategy=s),type:"radio",value:"per_request",class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[q,o.formData.strategy]]),t("span",pe," Create separate PO for each material request ("+i(r.uniqueRequests.length)+" POs) ",1)])])]),t("div",ge,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes (Optional) ",-1)),g(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.formData.notes=s),rows:"3",placeholder:"Add any special instructions for the supplier...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,o.formData.notes]])]),t("div",he,[e[21]||(e[21]=t("h4",{class:"font-semibold text-blue-800 mb-2"},"Summary",-1)),t("div",xe,[t("div",null,[t("p",be,[e[17]||(e[17]=y("Total Items: ")),t("span",ye,i(d.selectedItems.length),1)]),t("p",fe,[e[18]||(e[18]=y("Material Requests: ")),t("span",_e,i(r.uniqueRequests.length),1)])]),t("div",null,[t("p",ve,[e[19]||(e[19]=y("POs to Create: ")),t("span",we,i(o.formData.strategy==="single"?1:r.uniqueRequests.length),1)]),t("p",Se,[e[20]||(e[20]=y("Supplier: ")),t("span",ke,i(r.getSupplierName(o.formData.supplier)||"Not selected"),1)])])])]),t("div",Ce,[t("button",{onClick:e[6]||(e[6]=s=>l.$emit("close")),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),t("button",{onClick:e[7]||(e[7]=(...s)=>r.createPOs&&r.createPOs(...s)),disabled:o.isSubmitting||!r.isFormValid,class:C(["px-8 py-3 rounded-lg font-semibold flex items-center space-x-2 transition-all",o.isSubmitting||!r.isFormValid?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white transform hover:scale-105 shadow-lg"])},[o.isSubmitting?(n(),a("span",Ie,"Creating PO"+i(o.formData.strategy==="single"?"":"s")+"...",1)):(n(),a("span",Pe,"Create Purchase Order"+i(o.formData.strategy==="single"?"":"s"),1)),o.isSubmitting?(n(),a("div",Me)):(n(),M(b,{key:2,class:"w-5 h-5"}))],10,qe)])])])])}const De=I(E,[["render",Oe]]),Fe={name:"LineItemsView",components:{ArrowLeft:A,ShoppingCart:O,ExternalLink:V,SelectivePOCreationModal:De},data(){return{isLoading:!1,isLoadingMore:!1,lineItems:[],selectedItems:[],totalCount:0,hasMore:!1,showPOModal:!1,filters:{status:"all",item:"",supplier:""},searchTimeout:null}},computed:{isAllSelected(){const l=this.lineItems.filter(e=>e.item_status!=="received"&&e.pending_qty>0);return l.length>0&&l.every(e=>this.selectedItems.includes(e.line_item_id))},selectedItemsData(){return this.lineItems.filter(l=>this.selectedItems.includes(l.line_item_id))}},mounted(){this.loadLineItems()},methods:{loadLineItems(l=!1){return v(this,null,function*(){l?this.isLoadingMore=!0:(this.isLoading=!0,this.lineItems=[]);try{const e=l?this.lineItems.length:0,d=yield fetch("/api/method/material_requisition.api.material_request.get_line_items",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({status_filter:this.filters.status,item_filter:this.filters.item,supplier_filter:this.filters.supplier,limit:50,offset:e})});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const m=yield d.json();if(m.exc)throw new Error(m.exc);const o=m.message||{line_items:[],total_count:0,has_more:!1};l?this.lineItems.push(...o.line_items):this.lineItems=o.line_items,this.totalCount=o.total_count,this.hasMore=o.has_more}catch(e){console.error("Failed to load line items:",e),l||(this.lineItems=[])}finally{this.isLoading=!1,this.isLoadingMore=!1}})},loadMore(){this.loadLineItems(!0)},applyFilters(){this.selectedItems=[],this.loadLineItems()},debounceSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.applyFilters()},500)},clearFilters(){this.filters={status:"all",item:"",supplier:""},this.applyFilters()},selectAll(){const l=this.lineItems.filter(e=>e.item_status!=="received"&&e.pending_qty>0);this.selectedItems=l.map(e=>e.line_item_id)},clearSelection(){this.selectedItems=[]},toggleSelectAll(){this.isAllSelected?this.clearSelection():this.selectAll()},createPOFromSelected(){this.selectedItems.length!==0&&(this.showPOModal=!0)},closePOModal(){this.showPOModal=!1},onPOCreated(){this.closePOModal(),this.selectedItems=[],this.loadLineItems()},goBack(){this.$router.go(-1)},viewMaterialRequest(l){this.$router.push(`/request/${l}`)},openMRInERPNext(l){const e=`/app/material-request/${l}`;window.open(e,"_blank")},formatDate(l){return l?new Date(l).toLocaleDateString():"Not specified"},getStatusLabel(l){return{pending:"Pending",ordered:"Ordered",partial:"Partially Ordered",received:"Received"}[l]||l},getStatusBadgeClass(l){return{pending:"bg-yellow-100 text-yellow-800",ordered:"bg-blue-100 text-blue-800",partial:"bg-purple-100 text-purple-800",received:"bg-green-100 text-green-800"}[l]||"bg-gray-100 text-gray-800"}}},Le={class:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6"},Te={class:"max-w-7xl mx-auto"},Re={class:"flex items-center justify-between mb-8"},Ve={class:"flex space-x-4"},Ae={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},Ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ee={class:"flex items-end space-x-2"},je={class:"flex items-end"},Be={class:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg text-sm font-medium"},Ue={key:0,class:"text-center py-12"},He={key:1,class:"bg-white rounded-xl shadow-lg overflow-hidden"},ze={class:"overflow-x-auto"},Xe={class:"w-full"},Je={class:"bg-gray-50 border-b border-gray-200"},Qe={class:"px-6 py-4 text-left"},Ze=["checked"],Ge={class:"divide-y divide-gray-200"},Ke={class:"px-6 py-4"},We=["value","disabled"],Ye={class:"px-6 py-4"},$e={class:"font-medium text-gray-800"},et={class:"text-sm text-gray-600"},tt={class:"text-xs text-gray-500"},st={class:"px-6 py-4"},lt={class:"text-sm"},ot={class:"font-semibold text-gray-800"},rt={class:"text-gray-600"},it={class:"text-gray-600"},nt={class:"text-green-600 font-medium"},at={class:"px-6 py-4"},dt={class:"px-6 py-4"},ut={class:"text-sm"},ct={class:"font-medium text-gray-800"},mt={class:"text-gray-600"},pt={class:"text-gray-500"},gt={class:"px-6 py-4"},ht={class:"text-xs space-y-1"},xt={key:0,class:"inline-block bg-gray-200 text-gray-600 px-2 py-1 rounded text-xs"},bt={key:1,class:"text-gray-500 text-xs"},yt={class:"px-6 py-4"},ft={class:"flex space-x-2"},_t=["onClick"],vt=["onClick"],wt={key:0,class:"px-6 py-4 border-t border-gray-200 flex justify-between items-center"},St={class:"text-sm text-gray-600"},kt=["disabled"],Ct={key:2,class:"text-center py-16"};function qt(l,e,d,m,o,r){const _=h("ArrowLeft"),x=h("ShoppingCart"),c=h("ExternalLink"),b=h("SelectivePOCreationModal");return n(),a("div",Le,[t("div",Te,[t("div",Re,[e[13]||(e[13]=t("div",null,[t("h1",{class:"text-4xl font-bold text-gray-800 mb-2"},"🛒 Create Purchase Order"),t("p",{class:"text-lg text-gray-600"},"Select individual items from material requests to create purchase orders")],-1)),t("div",Ve,[t("button",{onClick:e[0]||(e[0]=(...s)=>r.goBack&&r.goBack(...s)),class:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors"},[f(_,{class:"w-5 h-5"}),e[12]||(e[12]=t("span",null,"Back",-1))]),o.selectedItems.length>0?(n(),a("button",{key:0,onClick:e[1]||(e[1]=(...s)=>r.createPOFromSelected&&r.createPOFromSelected(...s)),class:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors"},[f(x,{class:"w-5 h-5"}),t("span",null,"Create PO ("+i(o.selectedItems.length)+")",1)])):p("",!0)])]),t("div",Ae,[t("div",Ne,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.filters.status=s),onChange:e[3]||(e[3]=(...s)=>r.applyFilters&&r.applyFilters(...s)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[14]||(e[14]=[F('<option value="all">All Status</option><option value="pending">Pending</option><option value="partial">Partially Ordered</option><option value="ordered">Ordered</option><option value="received">Received</option>',5)]),544),[[P,o.filters.status]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Items",-1)),g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.filters.item=s),onInput:e[5]||(e[5]=(...s)=>r.debounceSearch&&r.debounceSearch(...s)),type:"text",placeholder:"Item code or name...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[k,o.filters.item]])]),t("div",Ee,[t("button",{onClick:e[6]||(e[6]=(...s)=>r.selectAll&&r.selectAll(...s)),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm transition-colors"}," Select All "),t("button",{onClick:e[7]||(e[7]=(...s)=>r.clearSelection&&r.clearSelection(...s)),class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors"}," Clear ")]),t("div",je,[t("div",Be,i(o.selectedItems.length)+" items selected ",1)])])]),o.isLoading?(n(),a("div",Ue,e[17]||(e[17]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading line items...",-1)]))):o.lineItems.length>0?(n(),a("div",He,[t("div",ze,[t("table",Xe,[t("thead",Je,[t("tr",null,[t("th",Qe,[t("input",{type:"checkbox",checked:r.isAllSelected,onChange:e[8]||(e[8]=(...s)=>r.toggleSelectAll&&r.toggleSelectAll(...s)),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,40,Ze)]),e[18]||(e[18]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Item",-1)),e[19]||(e[19]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Quantity",-1)),e[20]||(e[20]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Status",-1)),e[21]||(e[21]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Material Request",-1)),e[22]||(e[22]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Suppliers",-1)),e[23]||(e[23]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Actions",-1))])]),t("tbody",Ge,[(n(!0),a(w,null,S(o.lineItems,s=>(n(),a("tr",{key:s.line_item_id,class:C(["hover:bg-gray-50 transition-colors",o.selectedItems.includes(s.line_item_id)?"bg-blue-50":""])},[t("td",Ke,[g(t("input",{type:"checkbox",value:s.line_item_id,"onUpdate:modelValue":e[9]||(e[9]=u=>o.selectedItems=u),disabled:s.item_status==="received"||s.pending_qty<=0,class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,We),[[L,o.selectedItems]])]),t("td",Ye,[t("div",null,[t("p",$e,i(s.item_name),1),t("p",et,i(s.item_code),1),t("p",tt,i(s.description||"No description"),1)])]),t("td",st,[t("div",lt,[t("p",ot,i(s.qty)+" "+i(s.uom),1),t("p",rt,"Ordered: "+i(s.ordered_qty||0),1),t("p",it,"Received: "+i(s.received_qty||0),1),t("p",nt,"Pending: "+i(s.pending_qty||0),1)])]),t("td",at,[t("span",{class:C([r.getStatusBadgeClass(s.item_status),"px-3 py-1 rounded-full text-xs font-bold"])},i(r.getStatusLabel(s.item_status)),3)]),t("td",dt,[t("div",ut,[t("p",ct,i(s.material_request),1),t("p",mt,i(r.formatDate(s.transaction_date)),1),t("p",pt,i(s.project||"No project"),1)])]),t("td",gt,[t("div",ht,[(n(!0),a(w,null,S(s.suppliers.slice(0,2),u=>(n(),a("span",{key:u.supplier,class:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded mr-1"},i(u.supplier_name),1))),128)),s.suppliers.length>2?(n(),a("span",xt," +"+i(s.suppliers.length-2)+" more ",1)):p("",!0),s.suppliers.length===0?(n(),a("span",bt," No suppliers ")):p("",!0)])]),t("td",yt,[t("div",ft,[t("button",{onClick:u=>r.viewMaterialRequest(s.material_request),class:"text-blue-500 hover:text-blue-600 text-sm"}," View MR ",8,_t),t("button",{onClick:u=>r.openMRInERPNext(s.material_request),class:"text-blue-500 hover:text-blue-700 transition-colors",title:"Open in ERPNext"},[f(c,{class:"w-3 h-3"})],8,vt)])])],2))),128))])])]),o.totalCount>o.lineItems.length?(n(),a("div",wt,[t("p",St," Showing "+i(o.lineItems.length)+" of "+i(o.totalCount)+" items ",1),o.hasMore?(n(),a("button",{key:0,onClick:e[10]||(e[10]=(...s)=>r.loadMore&&r.loadMore(...s)),disabled:o.isLoadingMore,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm transition-colors disabled:opacity-50"},i(o.isLoadingMore?"Loading...":"Load More"),9,kt)):p("",!0)])):p("",!0)])):(n(),a("div",Ct,[e[24]||(e[24]=t("div",{class:"text-6xl mb-4"},"🛒",-1)),e[25]||(e[25]=t("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"No items available for purchase orders",-1)),e[26]||(e[26]=t("p",{class:"text-gray-600 mb-6"},"No items match your current filters or all items have been ordered",-1)),t("button",{onClick:e[11]||(e[11]=(...s)=>r.clearFilters&&r.clearFilters(...s)),class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors"}," Clear Filters ")]))]),o.showPOModal?(n(),M(b,{key:0,selectedItems:r.selectedItemsData,onClose:r.closePOModal,onCreated:r.onPOCreated},null,8,["selectedItems","onClose","onCreated"])):p("",!0)])}const Ot=I(Fe,[["render",qt]]);export{Ot as default};
