var N=Object.defineProperty,B=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var y=(s,e,r)=>e in s?N(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,v=(s,e)=>{for(var r in e||(e={}))D.call(e,r)&&y(s,r,e[r]);if(f)for(var r of f(e))T.call(e,r)&&y(s,r,e[r]);return s},w=(s,e)=>B(s,F(e));var k=(s,e,r)=>new Promise((_,u)=>{var o=c=>{try{d(r.next(c))}catch(a){u(a)}},h=c=>{try{d(r.throw(c))}catch(a){u(a)}},d=c=>c.done?_(c.value):Promise.resolve(c.value).then(o,h);d((r=r.apply(s,e)).next())});import{c as I,_ as O,C,P as S,b as q,e as l,f as t,i as x,r as m,F as g,j as b,t as i,o as n,n as R,g as j,h as L,k as A}from"./index-CjRPw6xi.js";import{E as z,A as V}from"./external-link-BxT4Ot0t.js";import{F as E}from"./file-text-DKvncT8V.js";/**
 * @license lucide-vue-next v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=I("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),X={name:"ReceiptsList",components:{ArrowLeft:V,ChevronRight:q,Package:S,FileText:E,CheckCircle:C,XCircle:P,ExternalLink:z},data(){return{isLoading:!1,selectedStatus:"all",receipts:[],statusFilters:[{value:"all",label:"All",icon:S,count:0},{value:"draft",label:"Draft",icon:E,count:0},{value:"submitted",label:"Submitted",icon:C,count:0},{value:"cancelled",label:"Cancelled",icon:P,count:0}]}},computed:{filteredReceipts(){return this.selectedStatus==="all"?this.receipts:this.receipts.filter(s=>s.receipt_status.toLowerCase()===this.selectedStatus)}},mounted(){this.loadReceipts(),this.$route.query.status&&(this.selectedStatus=this.$route.query.status)},methods:{loadReceipts(){return k(this,null,function*(){var s;this.isLoading=!0;try{const e=yield fetch("/api/method/material_requisition.api.purchase_receipt.get_purchase_receipts",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=yield e.json();if(r.exc)throw new Error(r.exc);this.receipts=((s=r.message)==null?void 0:s.receipts)||[],this.updateStatusCounts()}catch(e){console.error("Failed to load receipts:",e),this.receipts=[]}finally{this.isLoading=!1}})},updateStatusCounts(){const s={all:this.receipts.length,draft:0,submitted:0,cancelled:0};this.receipts.forEach(e=>{const r=e.receipt_status.toLowerCase();s[r]!==void 0&&s[r]++}),this.statusFilters.forEach(e=>{e.count=s[e.value]||0})},selectStatus(s){this.selectedStatus=s,this.$router.replace({query:w(v({},this.$route.query),{status:s==="all"?void 0:s})})},goBack(){this.$router.go(-1)},viewReceipt(s){this.$router.push(`/receipt/${s}`)},openInERPNext(s){const e=`/app/purchase-receipt/${s}`;window.open(e,"_blank")},openPOInERPNext(s){const e=`/app/purchase-order/${s}`;window.open(e,"_blank")},formatDate(s){return new Date(s).toLocaleDateString()},formatCurrency(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s||0)},getStatusBadgeClass(s){return{Draft:"bg-gray-100 text-gray-800",Submitted:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"}[s]||"bg-gray-100 text-gray-800"}}},$={class:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6"},U={class:"max-w-7xl mx-auto"},G={class:"flex items-center justify-between mb-8"},H={class:"flex space-x-4"},J={class:"flex space-x-2 mb-6 overflow-x-auto"},K=["onClick"],M={key:0,class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full"},Q={key:0,class:"text-center py-12"},W={key:1,class:"grid gap-6"},Y={class:"flex items-center justify-between mb-4"},Z={class:"flex items-center space-x-2"},ee={class:"text-xl font-bold text-gray-800"},te={class:"text-gray-600"},se=["onClick"],ae={class:"flex items-center space-x-3"},re=["onClick"],oe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},ne={class:"font-medium text-gray-800"},le={class:"font-medium text-gray-800"},ie={class:"font-medium text-gray-800"},ce={key:0,class:"border-t pt-4"},ue={class:"flex flex-wrap gap-2"},de=["onClick"],pe={key:2,class:"text-center py-16"},xe={class:"text-gray-600 mb-6"};function he(s,e,r,_,u,o){const h=m("ArrowLeft"),d=m("ExternalLink"),c=m("ChevronRight");return n(),l("div",$,[t("div",U,[t("div",G,[e[2]||(e[2]=t("div",null,[t("h1",{class:"text-4xl font-bold text-gray-800 mb-2"},"ðŸ“¦ Purchase Receipts"),t("p",{class:"text-lg text-gray-600"},"Track received materials and goods")],-1)),t("div",H,[t("button",{onClick:e[0]||(e[0]=(...a)=>o.goBack&&o.goBack(...a)),class:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors"},[x(h,{class:"w-5 h-5"}),e[1]||(e[1]=t("span",null,"Back",-1))])])]),t("div",J,[(n(!0),l(g,null,b(u.statusFilters,a=>(n(),l("button",{key:a.value,class:R(["px-6 py-3 rounded-lg font-medium transition-colors whitespace-nowrap flex items-center space-x-2",u.selectedStatus===a.value?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"]),onClick:p=>o.selectStatus(a.value)},[(n(),j(A(a.icon),{class:"w-5 h-5"})),t("span",null,i(a.label),1),a.count>0?(n(),l("span",M,i(a.count),1)):L("",!0)],10,K))),128))]),u.isLoading?(n(),l("div",Q,e[3]||(e[3]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading receipts...",-1)]))):o.filteredReceipts.length>0?(n(),l("div",W,[(n(!0),l(g,null,b(o.filteredReceipts,a=>(n(),l("div",{key:a.name,class:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow"},[t("div",Y,[t("div",Z,[t("div",null,[t("h3",ee,i(a.name),1),t("p",te,i(o.formatDate(a.posting_date)),1)]),t("button",{onClick:p=>o.openInERPNext(a.name),class:"text-blue-500 hover:text-blue-700 transition-colors",title:"Open in ERPNext"},[x(d,{class:"w-4 h-4"})],8,se)]),t("div",ae,[t("span",{class:R([o.getStatusBadgeClass(a.receipt_status),"px-4 py-2 rounded-lg text-sm font-bold"])},i(a.receipt_status),3),t("button",{onClick:p=>o.viewReceipt(a.name),class:"text-blue-500 hover:text-blue-600"},[x(c,{class:"w-6 h-6"})],8,re)])]),t("div",oe,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"Supplier",-1)),t("p",ne,i(a.supplier),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600"},"Total Items",-1)),t("p",le,i(a.total_items||0),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600"},"Grand Total",-1)),t("p",ie,i(o.formatCurrency(a.grand_total)),1)])]),a.purchase_orders&&a.purchase_orders.length>0?(n(),l("div",ce,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Related Purchase Orders",-1)),t("div",ue,[(n(!0),l(g,null,b(a.purchase_orders,p=>(n(),l("span",{key:p,class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm flex items-center space-x-1"},[t("span",null,i(p),1),t("button",{onClick:me=>o.openPOInERPNext(p),class:"text-blue-600 hover:text-blue-800 transition-colors",title:"Open PO in ERPNext"},[x(d,{class:"w-3 h-3"})],8,de)]))),128))])])):L("",!0)]))),128))])):(n(),l("div",pe,[e[8]||(e[8]=t("div",{class:"text-6xl mb-4"},"ðŸ“¦",-1)),e[9]||(e[9]=t("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"No receipts found",-1)),t("p",xe,i(u.selectedStatus==="all"?"No purchase receipts yet":`No ${u.selectedStatus} receipts`),1)]))])])}const ye=O(X,[["render",he]]);export{ye as default};
