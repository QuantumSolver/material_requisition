var _=(s,e,u)=>new Promise((m,l)=>{var r=c=>{try{h(u.next(c))}catch(o){l(o)}},f=c=>{try{h(u.throw(c))}catch(o){l(o)}},h=c=>c.done?m(c.value):Promise.resolve(c.value).then(r,f);h((u=u.apply(s,e)).next())});import{c as D,_ as I,e as d,f as t,t as i,i as v,r as x,h as p,l as b,w as g,v as O,F as w,j as S,m as k,p as q,n as C,g as P,o as a,q as F,s as T}from"./index-DQBZAqt6.js";import{S as M,C as L,X as V,A}from"./x-BgDw9y7S.js";/**
 * @license lucide-vue-next v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=D("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),N={name:"SelectivePOCreationModal",components:{X:V,ChevronDown:L,ShoppingCart:M,FileText:R},props:{selectedItems:{type:Array,required:!0}},emits:["close","created"],data(){return{isSubmitting:!1,showValidation:!1,suppliers:[],formData:{supplier:"",required_date:this.getDefaultRequiredDate(),strategy:"single",notes:""}}},computed:{today(){return new Date().toISOString().split("T")[0]},isFormValid(){return this.formData.supplier&&this.formData.required_date},uniqueRequests(){const s=new Set(this.selectedItems.map(e=>e.material_request));return Array.from(s)},groupedItems(){const s={};return this.selectedItems.forEach(e=>{s[e.material_request]||(s[e.material_request]={material_request:e.material_request,items:[]}),s[e.material_request].items.push(e)}),Object.values(s)}},mounted(){return _(this,null,function*(){yield this.loadSuppliers()})},methods:{getDefaultRequiredDate(){const s=new Date;return s.setDate(s.getDate()+14),s.toISOString().split("T")[0]},loadSuppliers(){return _(this,null,function*(){try{const s=yield fetch("/api/method/material_requisition.api.purchase_order.get_suppliers",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const e=yield s.json();if(e.exc)throw new Error(e.exc);this.suppliers=e.message||[]}catch(s){console.error("Failed to load suppliers:",s),this.suppliers=[]}})},getSupplierName(s){const e=this.suppliers.find(u=>u.name===s);return e?e.supplier_name:null},createPOs(){return _(this,null,function*(){if(!this.isFormValid){this.showValidation=!0;return}this.isSubmitting=!0;try{const s=yield fetch("/api/method/material_requisition.api.purchase_order.create_from_selected_items",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({selected_items:this.selectedItems.map(u=>({line_item_id:u.line_item_id,material_request:u.material_request,item_code:u.item_code,qty:u.pending_qty||u.qty,uom:u.uom})),supplier:this.formData.supplier,required_date:this.formData.required_date,strategy:this.formData.strategy,notes:this.formData.notes})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const e=yield s.json();if(e.exc)throw new Error(e.exc);this.showSuccessMessage(e.message),this.$emit("created",e.message)}catch(s){console.error("Failed to create PO:",s),this.showErrorMessage(s.message)}finally{this.isSubmitting=!1}})},showSuccessMessage(s){const e=document.createElement("div");if(e.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Array.isArray(s)){const u=s.filter(m=>m.status==="success").length;e.textContent=`✅ ${u} Purchase Order(s) created successfully!`}else e.textContent=`✅ Purchase Order ${s.name||""} created successfully!`;document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},3e3)},showErrorMessage(s){const e=document.createElement("div");e.className="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",e.textContent=`❌ Error: ${s}`,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},5e3)}}},j={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},E={class:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},B={class:"flex items-center justify-between p-6 border-b"},U={class:"text-gray-600"},H={class:"p-6"},z={class:"mb-6"},X={class:"relative"},J=["value"],Q={key:0,class:"text-red-500 text-sm mt-1"},Z={class:"mb-6"},G=["min"],K={key:0,class:"text-red-500 text-sm mt-1"},W={class:"mb-6"},Y={class:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto"},$={class:"space-y-3"},ee={class:"font-medium text-gray-800 mb-2 flex items-center"},te={class:"ml-2 text-sm text-gray-500"},se={class:"space-y-2"},le={class:"flex-1"},oe={class:"font-medium text-gray-800"},re={class:"text-sm text-gray-600"},ie={class:"text-right"},ne={class:"font-semibold text-gray-800"},ae={class:"mb-6"},de={class:"space-y-2"},ue={class:"flex items-center"},ce={class:"flex items-center"},me={class:"ml-2 text-sm text-gray-700"},pe={class:"mb-6"},ge={class:"mb-6 bg-blue-50 rounded-lg p-4"},he={class:"grid grid-cols-2 gap-4 text-sm"},be={class:"text-blue-700"},xe={class:"font-semibold"},ye={class:"text-blue-700"},fe={class:"font-semibold"},_e={class:"text-blue-700"},ve={class:"font-semibold"},we={class:"text-blue-700"},Se={class:"font-semibold"},ke={class:"flex justify-end space-x-4"},Ce=["disabled"],qe={key:0},Ie={key:1},Oe={key:3,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"};function Pe(s,e,u,m,l,r){const f=x("X"),h=x("ChevronDown"),c=x("FileText"),o=x("ShoppingCart");return a(),d("div",j,[t("div",E,[t("div",B,[t("div",null,[e[8]||(e[8]=t("h2",{class:"text-2xl font-bold text-gray-800"},"Create Purchase Order from Selected Items",-1)),t("p",U,i(u.selectedItems.length)+" items selected from "+i(r.uniqueRequests.length)+" material requests",1)]),t("button",{onClick:e[0]||(e[0]=n=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition-colors"},[v(f,{class:"w-6 h-6"})])]),t("div",H,[t("div",z,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Supplier "),t("span",{class:"text-red-500"},"*")],-1)),t("div",X,[g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=n=>l.formData.supplier=n),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",required:""},[e[9]||(e[9]=t("option",{value:""},"Select a supplier...",-1)),(a(!0),d(w,null,S(l.suppliers,n=>(a(),d("option",{key:n.name,value:n.name},i(n.supplier_name),9,J))),128))],512),[[O,l.formData.supplier]]),v(h,{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none"})]),!l.formData.supplier&&l.showValidation?(a(),d("p",Q," Please select a supplier ")):p("",!0)]),t("div",Z,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Required By "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>l.formData.required_date=n),type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:r.today,required:""},null,8,G),[[k,l.formData.required_date]]),!l.formData.required_date&&l.showValidation?(a(),d("p",K," Please select a required date ")):p("",!0)]),t("div",W,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"Selected Items",-1)),t("div",Y,[t("div",$,[(a(!0),d(w,null,S(r.groupedItems,n=>(a(),d("div",{key:n.material_request,class:"border border-gray-200 rounded-lg p-3 bg-white"},[t("h4",ee,[v(c,{class:"w-4 h-4 mr-2"}),b(" "+i(n.material_request)+" ",1),t("span",te,"("+i(n.items.length)+" items)",1)]),t("div",se,[(a(!0),d(w,null,S(n.items,y=>(a(),d("div",{key:y.line_item_id,class:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0"},[t("div",le,[t("p",oe,i(y.item_name),1),t("p",re,i(y.item_code),1)]),t("div",ie,[t("p",ne,i(y.pending_qty||y.qty)+" "+i(y.uom),1),e[12]||(e[12]=t("p",{class:"text-xs text-gray-500"},"Pending qty",-1))])]))),128))])]))),128))])])]),t("div",ae,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Purchase Order Strategy ",-1)),t("div",de,[t("label",ue,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>l.formData.strategy=n),type:"radio",value:"single",class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[q,l.formData.strategy]]),e[14]||(e[14]=t("span",{class:"ml-2 text-sm text-gray-700"}," Create single PO with all items ",-1))]),t("label",ce,[g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>l.formData.strategy=n),type:"radio",value:"per_request",class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[q,l.formData.strategy]]),t("span",me," Create separate PO for each material request ("+i(r.uniqueRequests.length)+" POs) ",1)])])]),t("div",pe,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes (Optional) ",-1)),g(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=n=>l.formData.notes=n),rows:"3",placeholder:"Add any special instructions for the supplier...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,l.formData.notes]])]),t("div",ge,[e[21]||(e[21]=t("h4",{class:"font-semibold text-blue-800 mb-2"},"Summary",-1)),t("div",he,[t("div",null,[t("p",be,[e[17]||(e[17]=b("Total Items: ")),t("span",xe,i(u.selectedItems.length),1)]),t("p",ye,[e[18]||(e[18]=b("Material Requests: ")),t("span",fe,i(r.uniqueRequests.length),1)])]),t("div",null,[t("p",_e,[e[19]||(e[19]=b("POs to Create: ")),t("span",ve,i(l.formData.strategy==="single"?1:r.uniqueRequests.length),1)]),t("p",we,[e[20]||(e[20]=b("Supplier: ")),t("span",Se,i(r.getSupplierName(l.formData.supplier)||"Not selected"),1)])])])]),t("div",ke,[t("button",{onClick:e[6]||(e[6]=n=>s.$emit("close")),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),t("button",{onClick:e[7]||(e[7]=(...n)=>r.createPOs&&r.createPOs(...n)),disabled:l.isSubmitting||!r.isFormValid,class:C(["px-8 py-3 rounded-lg font-semibold flex items-center space-x-2 transition-all",l.isSubmitting||!r.isFormValid?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white transform hover:scale-105 shadow-lg"])},[l.isSubmitting?(a(),d("span",qe,"Creating PO"+i(l.formData.strategy==="single"?"":"s")+"...",1)):(a(),d("span",Ie,"Create Purchase Order"+i(l.formData.strategy==="single"?"":"s"),1)),l.isSubmitting?(a(),d("div",Oe)):(a(),P(o,{key:2,class:"w-5 h-5"}))],10,Ce)])])])])}const Me=I(N,[["render",Pe]]),De={name:"LineItemsView",components:{ArrowLeft:A,ShoppingCart:M,SelectivePOCreationModal:Me},data(){return{isLoading:!1,isLoadingMore:!1,lineItems:[],selectedItems:[],totalCount:0,hasMore:!1,showPOModal:!1,filters:{status:"all",item:"",supplier:""},searchTimeout:null}},computed:{isAllSelected(){const s=this.lineItems.filter(e=>e.item_status!=="received"&&e.pending_qty>0);return s.length>0&&s.every(e=>this.selectedItems.includes(e.line_item_id))},selectedItemsData(){return this.lineItems.filter(s=>this.selectedItems.includes(s.line_item_id))}},mounted(){this.loadLineItems()},methods:{loadLineItems(s=!1){return _(this,null,function*(){s?this.isLoadingMore=!0:(this.isLoading=!0,this.lineItems=[]);try{const e=s?this.lineItems.length:0,u=yield fetch("/api/method/material_requisition.api.material_request.get_line_items",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({status_filter:this.filters.status,item_filter:this.filters.item,supplier_filter:this.filters.supplier,limit:50,offset:e})});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const m=yield u.json();if(m.exc)throw new Error(m.exc);const l=m.message||{line_items:[],total_count:0,has_more:!1};s?this.lineItems.push(...l.line_items):this.lineItems=l.line_items,this.totalCount=l.total_count,this.hasMore=l.has_more}catch(e){console.error("Failed to load line items:",e),s||(this.lineItems=[])}finally{this.isLoading=!1,this.isLoadingMore=!1}})},loadMore(){this.loadLineItems(!0)},applyFilters(){this.selectedItems=[],this.loadLineItems()},debounceSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.applyFilters()},500)},clearFilters(){this.filters={status:"all",item:"",supplier:""},this.applyFilters()},selectAll(){const s=this.lineItems.filter(e=>e.item_status!=="received"&&e.pending_qty>0);this.selectedItems=s.map(e=>e.line_item_id)},clearSelection(){this.selectedItems=[]},toggleSelectAll(){this.isAllSelected?this.clearSelection():this.selectAll()},createPOFromSelected(){this.selectedItems.length!==0&&(this.showPOModal=!0)},closePOModal(){this.showPOModal=!1},onPOCreated(){this.closePOModal(),this.selectedItems=[],this.loadLineItems()},goBack(){this.$router.go(-1)},viewMaterialRequest(s){this.$router.push(`/request/${s}`)},formatDate(s){return s?new Date(s).toLocaleDateString():"Not specified"},getStatusLabel(s){return{pending:"Pending",ordered:"Ordered",partial:"Partially Ordered",received:"Received"}[s]||s},getStatusBadgeClass(s){return{pending:"bg-yellow-100 text-yellow-800",ordered:"bg-blue-100 text-blue-800",partial:"bg-purple-100 text-purple-800",received:"bg-green-100 text-green-800"}[s]||"bg-gray-100 text-gray-800"}}},Fe={class:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6"},Te={class:"max-w-7xl mx-auto"},Le={class:"flex items-center justify-between mb-8"},Ve={class:"flex space-x-4"},Ae={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},Re={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ne={class:"flex items-end space-x-2"},je={class:"flex items-end"},Ee={class:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg text-sm font-medium"},Be={key:0,class:"text-center py-12"},Ue={key:1,class:"bg-white rounded-xl shadow-lg overflow-hidden"},He={class:"overflow-x-auto"},ze={class:"w-full"},Xe={class:"bg-gray-50 border-b border-gray-200"},Je={class:"px-6 py-4 text-left"},Qe=["checked"],Ze={class:"divide-y divide-gray-200"},Ge={class:"px-6 py-4"},Ke=["value","disabled"],We={class:"px-6 py-4"},Ye={class:"font-medium text-gray-800"},$e={class:"text-sm text-gray-600"},et={class:"text-xs text-gray-500"},tt={class:"px-6 py-4"},st={class:"text-sm"},lt={class:"font-semibold text-gray-800"},ot={class:"text-gray-600"},rt={class:"text-gray-600"},it={class:"text-green-600 font-medium"},nt={class:"px-6 py-4"},at={class:"px-6 py-4"},dt={class:"text-sm"},ut={class:"font-medium text-gray-800"},ct={class:"text-gray-600"},mt={class:"text-gray-500"},pt={class:"px-6 py-4"},gt={class:"text-xs space-y-1"},ht={key:0,class:"inline-block bg-gray-200 text-gray-600 px-2 py-1 rounded text-xs"},bt={key:1,class:"text-gray-500 text-xs"},xt={class:"px-6 py-4"},yt=["onClick"],ft={key:0,class:"px-6 py-4 border-t border-gray-200 flex justify-between items-center"},_t={class:"text-sm text-gray-600"},vt=["disabled"],wt={key:2,class:"text-center py-16"};function St(s,e,u,m,l,r){const f=x("ArrowLeft"),h=x("ShoppingCart"),c=x("SelectivePOCreationModal");return a(),d("div",Fe,[t("div",Te,[t("div",Le,[e[13]||(e[13]=t("div",null,[t("h1",{class:"text-4xl font-bold text-gray-800 mb-2"},"🛒 Create Purchase Order"),t("p",{class:"text-lg text-gray-600"},"Select individual items from material requests to create purchase orders")],-1)),t("div",Ve,[t("button",{onClick:e[0]||(e[0]=(...o)=>r.goBack&&r.goBack(...o)),class:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors"},[v(f,{class:"w-5 h-5"}),e[12]||(e[12]=t("span",null,"Back",-1))]),l.selectedItems.length>0?(a(),d("button",{key:0,onClick:e[1]||(e[1]=(...o)=>r.createPOFromSelected&&r.createPOFromSelected(...o)),class:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors"},[v(h,{class:"w-5 h-5"}),t("span",null,"Create PO ("+i(l.selectedItems.length)+")",1)])):p("",!0)])]),t("div",Ae,[t("div",Re,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.filters.status=o),onChange:e[3]||(e[3]=(...o)=>r.applyFilters&&r.applyFilters(...o)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[14]||(e[14]=[F('<option value="all">All Status</option><option value="pending">Pending</option><option value="partial">Partially Ordered</option><option value="ordered">Ordered</option><option value="received">Received</option>',5)]),544),[[O,l.filters.status]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Items",-1)),g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.filters.item=o),onInput:e[5]||(e[5]=(...o)=>r.debounceSearch&&r.debounceSearch(...o)),type:"text",placeholder:"Item code or name...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[k,l.filters.item]])]),t("div",Ne,[t("button",{onClick:e[6]||(e[6]=(...o)=>r.selectAll&&r.selectAll(...o)),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm transition-colors"}," Select All "),t("button",{onClick:e[7]||(e[7]=(...o)=>r.clearSelection&&r.clearSelection(...o)),class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors"}," Clear ")]),t("div",je,[t("div",Ee,i(l.selectedItems.length)+" items selected ",1)])])]),l.isLoading?(a(),d("div",Be,e[17]||(e[17]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading line items...",-1)]))):l.lineItems.length>0?(a(),d("div",Ue,[t("div",He,[t("table",ze,[t("thead",Xe,[t("tr",null,[t("th",Je,[t("input",{type:"checkbox",checked:r.isAllSelected,onChange:e[8]||(e[8]=(...o)=>r.toggleSelectAll&&r.toggleSelectAll(...o)),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,40,Qe)]),e[18]||(e[18]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Item",-1)),e[19]||(e[19]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Quantity",-1)),e[20]||(e[20]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Status",-1)),e[21]||(e[21]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Material Request",-1)),e[22]||(e[22]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Suppliers",-1)),e[23]||(e[23]=t("th",{class:"px-6 py-4 text-left text-sm font-semibold text-gray-700"},"Actions",-1))])]),t("tbody",Ze,[(a(!0),d(w,null,S(l.lineItems,o=>(a(),d("tr",{key:o.line_item_id,class:C(["hover:bg-gray-50 transition-colors",l.selectedItems.includes(o.line_item_id)?"bg-blue-50":""])},[t("td",Ge,[g(t("input",{type:"checkbox",value:o.line_item_id,"onUpdate:modelValue":e[9]||(e[9]=n=>l.selectedItems=n),disabled:o.item_status==="received"||o.pending_qty<=0,class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,Ke),[[T,l.selectedItems]])]),t("td",We,[t("div",null,[t("p",Ye,i(o.item_name),1),t("p",$e,i(o.item_code),1),t("p",et,i(o.description||"No description"),1)])]),t("td",tt,[t("div",st,[t("p",lt,i(o.qty)+" "+i(o.uom),1),t("p",ot,"Ordered: "+i(o.ordered_qty||0),1),t("p",rt,"Received: "+i(o.received_qty||0),1),t("p",it,"Pending: "+i(o.pending_qty||0),1)])]),t("td",nt,[t("span",{class:C([r.getStatusBadgeClass(o.item_status),"px-3 py-1 rounded-full text-xs font-bold"])},i(r.getStatusLabel(o.item_status)),3)]),t("td",at,[t("div",dt,[t("p",ut,i(o.material_request),1),t("p",ct,i(r.formatDate(o.transaction_date)),1),t("p",mt,i(o.project||"No project"),1)])]),t("td",pt,[t("div",gt,[(a(!0),d(w,null,S(o.suppliers.slice(0,2),n=>(a(),d("span",{key:n.supplier,class:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded mr-1"},i(n.supplier_name),1))),128)),o.suppliers.length>2?(a(),d("span",ht," +"+i(o.suppliers.length-2)+" more ",1)):p("",!0),o.suppliers.length===0?(a(),d("span",bt," No suppliers ")):p("",!0)])]),t("td",xt,[t("button",{onClick:n=>r.viewMaterialRequest(o.material_request),class:"text-blue-500 hover:text-blue-600 text-sm"}," View MR ",8,yt)])],2))),128))])])]),l.totalCount>l.lineItems.length?(a(),d("div",ft,[t("p",_t," Showing "+i(l.lineItems.length)+" of "+i(l.totalCount)+" items ",1),l.hasMore?(a(),d("button",{key:0,onClick:e[10]||(e[10]=(...o)=>r.loadMore&&r.loadMore(...o)),disabled:l.isLoadingMore,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm transition-colors disabled:opacity-50"},i(l.isLoadingMore?"Loading...":"Load More"),9,vt)):p("",!0)])):p("",!0)])):(a(),d("div",wt,[e[24]||(e[24]=t("div",{class:"text-6xl mb-4"},"🛒",-1)),e[25]||(e[25]=t("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"No items available for purchase orders",-1)),e[26]||(e[26]=t("p",{class:"text-gray-600 mb-6"},"No items match your current filters or all items have been ordered",-1)),t("button",{onClick:e[11]||(e[11]=(...o)=>r.clearFilters&&r.clearFilters(...o)),class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors"}," Clear Filters ")]))]),l.showPOModal?(a(),P(c,{key:0,selectedItems:r.selectedItemsData,onClose:r.closePOModal,onCreated:r.onPOCreated},null,8,["selectedItems","onClose","onCreated"])):p("",!0)])}const It=I(De,[["render",St]]);export{It as default};
